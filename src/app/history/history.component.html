<div class="component">
  <h3 class="mt-20">Your Search History</h3>

  <div
    class="border border-gray-300 bg-white rounded-lg w-[50vw] min-w-[500px]"
    *ngIf="searchHistory.length > 0; else noResultTemplate"
  >
    <table class="w-full">
      <tr class="text-left">
        <th class="th rounded-tl-lg">Search Term</th>
        <th class="th rounded-tr-lg">Search Result</th>
      </tr>

      <tr
        class="border-t border-gray-300 align-top"
        *ngFor="let history of searchHistory"
      >
        <td>
          <p class="mt-3 p-3 text-gray-700 font-bold text-base">
            {{ history.searchTerm }}
          </p>
        </td>
        <td>
          <div class="grid grid-cols-2 p-5">
            <div>
              <p class="">User Image</p>

              <img
                class="rounded-lg w-24"
                [src]="
                  history.searchResult.avatar_url ||
                  'https://cdn.landesa.org/wp-content/uploads/default-user-image.png'
                "
              />
            </div>

            <div>
              <p class="">GitHub User Name</p>
              <a
                target="_blank"
                rel="noopener noreferrer"
                class="text-lg text-gray-500 hover:underline"
                [href]="history.searchResult.html_url"
              >
                {{ history.searchResult.login }}
              </a>
            </div>
          </div>
        </td>
      </tr>
    </table>
  </div>

  <button
    type="submit"
    class="action-btn mb-8"
    *ngIf="searchHistory.length > 0"
    (click)="clearHistory()"
  >
    Clear Search History
  </button>
</div>

<ng-template #noResultTemplate>
  <p class="text-lg text-gray-500 text-bold">No Search History Found</p>
</ng-template>
